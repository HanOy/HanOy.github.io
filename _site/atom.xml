<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>欧阳晗</title>
  <link href="http://ouyanghan/atom.xml" rel="self"/>
  <link href="http://ouyanghan/"/>
  <updated>2017-11-16T17:03:30+08:00</updated>
  <id>http://ouyanghan.com/</id>
  <author>
    <name>ouyanghan</name>
    <email>oyh3745@gmail.com</email>
  </author>
  
  <entry>
    <title>div模拟输入框实现高度自适应</title>
    <link href="http://ouyanghan.com/div"/>
    <updated>2017-08-30T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/div</id>
    <content type="html">&lt;h2 id=&quot;section&quot;&gt;需求&lt;/h2&gt;
&lt;p&gt;工单详情里的一个随时可修改的备注框。&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;问题&lt;/h2&gt;
&lt;p&gt;input标签只能单行，备注可能很多，在手机上展示不全。
textarea标签，高度自适应需要用js控制，实现起来略麻烦。&lt;/p&gt;

&lt;h2 id=&quot;div&quot;&gt;解决——div模拟输入框实现高度自适应&lt;/h2&gt;
&lt;p&gt;使用很简单，如下：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div contenteditable=&quot;true&quot;&amp;gt;&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;网页上测试并没有多大问题，就是用js获取焦点时输入的光标每次都会在最前面。解决方法如下：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;if (window.getSelection) {
    obj.focus(); //解决ff不获取焦点无法定位问题
    var range = window.getSelection();//创建range
    range.selectAllChildren(obj);//range 选择obj下所有子内容
    range.collapseToEnd();//光标移至最后
} else if (document.selection) {//ie10 9 8 7 6 5
    var range = document.selection.createRange();//创建选择对象
    range.moveToElementText(obj);//range定位到obj
    range.collapse(false);//光标移至最后
    range.select();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;最后发现在ios设备上，并没有效果，后来发现还需要添加这个样式：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-webkit-user-select: text;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;最后是效果：&lt;/p&gt;
&lt;div contenteditable=&quot;true&quot; style=&quot;border: 1px solid;-webkit-user-select: text;&quot;&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div contenteditable=&quot;true&quot; style=&quot;border: 1px solid;-webkit-user-select: text;&quot;&amp;gt;&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>记一个兼容性问题</title>
    <link href="http://ouyanghan.com/iosIframeProblem"/>
    <updated>2017-03-10T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/iosIframeProblem</id>
    <content type="html">&lt;p&gt;故事的起因是这样的：主角是一个搜索框，它在安卓中、网页浏览器中工作的好好的。可是它却在iphone中闹起了情绪。并且这个页面嵌在iframe中的时候才会出现这个问题。&lt;/p&gt;

&lt;p&gt;点击搜索后强行将input焦点移出来也并不管用：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$(&#39;searchBtn&#39;).click(function() {
	$(&#39;input&#39;).blur();	
})
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;问题出在使用了神奇的iframe上，这个时候就要派出更神奇的$(window)了：&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;step-1&quot;&gt;step 1&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var inputFocused = false;
$(&#39;input&#39;).focus(function() {
    setTimeout(function() {
        inputFocused = true;
    },100);
});
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;step-2&quot;&gt;step 2&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$(window).click(function() {
    if(inputFocused == true) {
        $(window).focus();
        $(&#39;input&#39;).blur();
        inputFocused = false;
    }
});
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;hr /&gt;
&lt;p&gt;至于为什么要加setTimeOut方法是因为 $(window).click()事件包括了屏幕上所有的点击，所以要让inputFocused为true有一些延迟咯 :)&lt;/p&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>期待电动车成为主流的那一天</title>
    <link href="http://ouyanghan.com/car"/>
    <updated>2016-09-06T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/car</id>
    <content type="html">&lt;hr /&gt;
&lt;p&gt;LeSEE乐视超级汽车&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://lesee.leeco.com/&quot;&gt;http://lesee.leeco.com/&lt;/a&gt;
&lt;img src=&quot;http://i0.letvimg.com/lc06_img/201610/09/17/09/images/Slideshow2/Ext_2_1320.jpg&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;蔚来汽车&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.nio.com/&quot;&gt;http://www.nio.com/&lt;/a&gt;
&lt;img src=&quot;http://www.nio.com/prod/s3fs-public/styles/scale_width_1920_desktop_1x_/public/2017-04/935_AT_NextEV_Teaser_Front34_v11a_R_1.jpg?GgCHOGCl73vGKOoaQyI0IXJY4ekN47Dx&amp;amp;itok=8uNv0ne7&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;小鹏汽车&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.xiaopeng.com/#page1&quot;&gt;https://www.xiaopeng.com/&lt;/a&gt;
&lt;img src=&quot;http://img.mp.itc.cn/upload/20170101/6226e2fdce7949c39f19cb17afff9cb2_th.jpg&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;奇点汽车&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.zhicheauto.com/&quot;&gt;http://www.zhicheauto.com/&lt;/a&gt;
&lt;img src=&quot;https://www.singulato.com/wp-content/themes/singulato/img/car_1.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;车和家&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.chehejia.com/&quot;&gt;https://www.chehejia.com/&lt;/a&gt;
&lt;img src=&quot;https://s.chehejia.com/www/img/index/indexcar-big.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;威马汽车&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.wm-motor.com&quot;&gt;http://www.wm-motor.com&lt;/a&gt;
&lt;img src=&quot;http://wm-ow.b0.upaiyun.com/jpeg/c5ztwj9zqzoyekqzqqyn3fesvryq3y3x.jpeg!W640&quot; /&gt;&lt;/p&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>试一下WebGL</title>
    <link href="http://ouyanghan.com/webgl"/>
    <updated>2016-08-30T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/webgl</id>
    <content type="html">&lt;p&gt;无意中逛到一个超炫酷的个人网站：&lt;a href=&quot;http://mystaticself.com/&quot;&gt;http://mystaticself.com/&lt;/a&gt; （貌似需要翻墙）问了公司的H5才知道实现这样用的是WebGL。&lt;/p&gt;

&lt;p&gt;维基百科：WebGL是一项利用JavaScript API渲染交互式3D电脑图形和2D图形的技术，可兼容任何的网页浏览器，无需加装插件。通过WebGL的技术，只需要编写网页代码即可实现3D图像的展示。&lt;/p&gt;

&lt;p&gt;本着炫酷故我在的精神，当然要研究一番，但是发现水不是一般深呢，三两天的功夫都不能做到那个大神的程度的十分之一。&lt;/p&gt;

&lt;p&gt;接着找到一个封装过的3D的地球API：&lt;a href=&quot;http://www.webglearth.org/&quot;&gt;WebGL Earth&lt;/a&gt; 封装的挺简单的，官网也说的比较详细，然后自己玩了一番。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ouyanghan.com/helloworld&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;效果图：
&lt;img src=&quot;/res/world.jpg&quot; width=&quot;280&quot; height=&quot;480&quot; /&gt;&lt;/p&gt;

&lt;p&gt;代码：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE HTML&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://www.webglearth.com/v2/api.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
    	&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;earth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    	&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;earth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;earth_div&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,{&lt;/span&gt;
        	&lt;span class=&quot;na&quot;&gt;atmosphere&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        	&lt;span class=&quot;na&quot;&gt;sky&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;WE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tileLayer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,{&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;attribution&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;© OpenStreetMap contributors&#39;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;earth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;nx&quot;&gt;marker&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;31.198248&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;121.448596&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;earth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bindPopup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;b&amp;gt;Hello world!&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;I am here.&amp;lt;br /&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;maxWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;closeButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

        &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;marker1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;26.053351&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;113.037404&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;earth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;marker1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bindPopup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;b&amp;gt;where I grow up.&amp;lt;br /&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;maxWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;closeButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

        &lt;span class=&quot;nx&quot;&gt;earth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;34.262278&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;103.628637&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;flyToMe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;earth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;panInsideBounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;31.056144060646687&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;31.38522435978879&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;120.78966784638101&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;122.19440192910949&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//earth.panTo([31.198248, 121.448596]);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;openPopup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;back&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      	&lt;span class=&quot;c1&quot;&gt;//earth.setView([34.262278, 103.628637], 3);&lt;/span&gt;
      	&lt;span class=&quot;nx&quot;&gt;earth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;panInsideBounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.32268236188567&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;48.86931220325214&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;63.53559837081185&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;143.72167565826413&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
      	&lt;span class=&quot;nx&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;closePopup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
      	&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;earth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getBounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;style&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
      &lt;span class=&quot;nf&quot;&gt;#earth_div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;bottom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;absolute&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;!important&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
      &lt;span class=&quot;nf&quot;&gt;#buttons&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;absolute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;50px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;50px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;欧阳晗-WebGL Earth API: Hello World&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onload=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;initialize()&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  	&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;wx_logo&#39;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;style=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;margin:0 auto;display:none;&#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    	&lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;../favicon.jpg&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;earth_div&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;buttons&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Fly to Me&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onclick=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;flyToMe();&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;style=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;width:120px;height:40px;border:2px #9999FF dashed;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;back&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onclick=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;back();&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;style=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;width:120px;height:40px;border:2px #9999FF dashed;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;br&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>试一下phonegap</title>
    <link href="http://ouyanghan.com/phonegap"/>
    <updated>2016-07-13T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/phonegap</id>
    <content type="html">&lt;p&gt;这是&lt;a href=&quot;http://ouyanghan.com/2048&quot;&gt;H5的2048&lt;/a&gt;，今天拉屎的时候感觉浏览器上运行操作手感还是太膈应了。so，今天尝试用phonegap把它转成了apk，果然流畅了很多，一下就突破了最高分纪录: )&lt;/p&gt;

&lt;p&gt;在这里稍微记录下用phonegap的感受，其实也就是看着官网&lt;a href=&quot;http://phonegap.com&quot;&gt;phonegap.com&lt;/a&gt;的Get Started一步一步就好了。&lt;/p&gt;

&lt;p&gt;先抄一下百度百科，PhoneGap是一个用基于HTML，CSS和JavaScript的，创建移动跨平台移动应用程序的快速开发平台。&lt;/p&gt;

&lt;p&gt;步骤如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在电脑上装一个app&lt;/li&gt;
  &lt;li&gt;在手机上装一个app&lt;/li&gt;
  &lt;li&gt;新建一个phonegap项目，把html、js等放进去&lt;/li&gt;
  &lt;li&gt;启动这个项目&lt;/li&gt;
  &lt;li&gt;手机app连接这个项目便可以直接看效果了&lt;/li&gt;
  &lt;li&gt;然后打包用的是官网的打包服务&lt;/li&gt;
  &lt;li&gt;打包后下载安装就好了，太特么强大了。。。&lt;/li&gt;
&lt;/ul&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>拯救世界还是挣钱</title>
    <link href="http://ouyanghan.com/tucao"/>
    <updated>2016-07-13T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/tucao</id>
    <content type="html">&lt;p&gt;树大招风呢，百度又遭人插一刀。这次百度是深夜推广赌博网站。
开公司为了赚钱无可厚非，毕竟还要付那么多人工资呢。我并不是想在这里抨击百度搜索，我只是想在这里赞扬一下那些专心做产品的公司，以用户为首位的公司。&lt;/p&gt;

&lt;p&gt;我想到了&lt;a href=&quot;https://www.google.com/intl/zh-CN/about/company/philosophy/&quot;&gt;google的十大信条&lt;/a&gt;，其中第一条是:&lt;/p&gt;

&lt;p&gt;以用户为中心，其他一切自然水到渠成。&lt;/p&gt;

&lt;p&gt;自创建伊始，Google就一直以提供最佳用户体验为宗旨。无论是设计全新的网络浏览器，还是更换首页外观，我们都非常用心地确保最终的结果能够很好地满足用户需求，而不是为了实现公司自身的目标和经济利益。我们的首页界面简单明了，网页加载速度非常快。我们从不对外出售搜索结果中的展示位置。对于广告，我们不仅清楚地将它们标记出来，而且广告内容也会与搜索相关，从而确保广告不会分散用户的注意力。在开发新的工具和应用时，我们秉承这样一种理念：设计出来的产品应该非常出色，而不会让用户产生“这个产品应该这样或者那样设计”的想法。&lt;/p&gt;

&lt;p&gt;且不论真假，反正谷歌这段话让我这个用户感觉很舒服。&lt;/p&gt;

&lt;p&gt;对比于百度搜索下的&lt;a href=&quot;https://www.baidu.com/duty/&quot;&gt;使用百度前必读&lt;/a&gt;，进来便是免责声明，大致意思是你搜出来什么违法、带病毒的网站我概不负责。虽然我知道你们没什么责任，但颇有一种店大欺客的感觉。&lt;/p&gt;

&lt;p&gt;相较于谷歌的使用服务说明，谷歌显得委婉很多：&lt;/p&gt;

&lt;p&gt;我们的服务会显示一些不属于 Google 的内容。这些内容由发布的实体承担全部责任。我们可能会审查相关内容，以确定其是否违法或违反了我们的政策；如果我们有理由相信该内容违反了我们的政策或违法，我们可以将其删除或拒绝显示。不过，这并不意味我们必然会审查内容，因此请勿想当然地认为我们在进行审查。&lt;/p&gt;

&lt;p&gt;我还想到美剧《硅谷》里关于做平台还是做盒子的冲突。只关心公司市值的CEO想做一个基于男主技术的盒子，这样可以迅速产生利润拿到下一轮的钱。但想让自己的技术show给更多人的男主们却想做一个平台，希望更多的普通人喜欢他们的技术。虽然故事最后他们确实做了平台，那位CEO也下课了，但还是有种种原因公司拿不到下一轮融资破产而被收购。可能这就是现实与理想的差距吧，好了吐槽完了，得赶紧改bug去了。&lt;/p&gt;

&lt;p&gt;对了，收购的人是男主的好朋友，所以在下一季估计他们就能改变世界了~&lt;/p&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>聊聊pokeman go</title>
    <link href="http://ouyanghan.com/pokemango"/>
    <updated>2016-07-13T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/pokemango</id>
    <content type="html">&lt;p&gt;任天堂、精灵宝可梦、Niantic合作推出的Pokemon Go《口袋妖怪Go》最近火的一塌糊涂。&lt;/p&gt;

&lt;p&gt;虽然那个锁区的长方形框住了上海，抓不了小精灵，我还是把它给下下来感受了一把，毕竟还有新手教程可以抓一只妙蛙种子呢:P&lt;/p&gt;

&lt;p&gt;打开游戏，开启定位功能之后，游戏会在摄像头实时拍摄的画面中叠加小精灵，这些精灵可能会藏在任何角落，你需要拿着手机四处走动，发现它并且抓住它。不得不说打开了游戏方式新的大门。基于的技术呢主要就是AR（增强现实，简单说就是虚拟的小精灵套在现实世界）和LBS（基于位置服务，简单说就是定位）。&lt;/p&gt;

&lt;h2 id=&quot;lbs&quot;&gt;LBS&lt;/h2&gt;
&lt;p&gt;先来看看LBS，国内最完备的无非就是百度地图和高德地图咯，但是pokeman go却是基于google地图的。2010年谷歌退出中国了，地图不准是应该的，但游戏地图里的数据居然会这么不准确！！当你真的去玩了就知道游戏里的地图是多么不准确了。给大家看看我截下来的图。。这可是上海徐家汇附近，不是什么犄角旮旯的地方。&lt;/p&gt;
&lt;div&gt;
	&lt;img src=&quot;/res/pokemango.jpg&quot; width=&quot;210&quot; height=&quot;360&quot; style=&quot;display:inline-block;vertical-align:right&quot; /&gt;
	&lt;img src=&quot;/res/pokeman3.jpg&quot; width=&quot;280&quot; height=&quot;360&quot; style=&quot;display:inline-block;vertical-align:left&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;当你走到游戏地图的湖边想抓一只水系的小精灵，但是发现这里早已是一幢高楼，这个游戏体验得摔手机了。&lt;/p&gt;

&lt;h2 id=&quot;ar&quot;&gt;AR&lt;/h2&gt;
&lt;p&gt;来看看AR，貌似很厉害的样子。但实际了解下来，并不是什么超级复杂的技术，而且国内已经有AR功能的app了，只不过不是游戏而已，像这个app&lt;a href=&quot;http://baike.baidu.com/link?url=qlspSq4ou9HXE_JSOhlkbsPp74C6MM0qxK1t-e4ERoMfIZ6ZjZ0DphDb_2qQnK0hl6fcQ30fBsKnFMwwYqrYba&quot;&gt;随便走&lt;/a&gt;，基于AR+LBS的导航，也是挺有意思的。还有宜家的app&lt;a href=&quot;http://www.ikea.com/ms/zh_CN/campaigns/catalogue_2016/index.html&quot;&gt;家居指南&lt;/a&gt;，可以把虚拟家具直接放在家里看效果，cool~&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/res/pokemango2.jpg&quot; width=&quot;220&quot; height=&quot;380&quot; /&gt;&lt;/p&gt;

&lt;p&gt;与其期待pokeman go在国服能愉快的玩耍，还不如期待国内跟风开发出来的带本土特色的类似游戏呢，毕竟技术上也不是难点。&lt;/p&gt;

&lt;p&gt;所以在我看来，对于中国市场来说，种菜偷菜才是用户需求痛点！在地图上，有着各种各样的蔬菜，为了获得菜，玩家们乐此不疲的走出家门，奔赴一个又一个的菜点。对于标志性建筑还可以设置为菜园子，贡献度高的玩家可以成为至高无上的地主！2.0版本还支持斗地主！玩法极多，相信一定可以在国内击败pokeman go。好了，现在就差钱开工了，有老板想投资的吗？&lt;/p&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>冲动是可以用写代码来抑制的吧</title>
    <link href="http://ouyanghan.com/mood"/>
    <updated>2016-06-13T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/mood</id>
    <content type="html">&lt;p&gt;心血来潮想写点啥&lt;/p&gt;

&lt;p&gt;写着写着&lt;/p&gt;

&lt;p&gt;又来bug了&lt;/p&gt;

&lt;p&gt;bug解决完了&lt;/p&gt;

&lt;p&gt;潮已经退了&lt;/p&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>开源翻墙利器</title>
    <link href="http://ouyanghan.com/lantern"/>
    <updated>2016-05-04T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/lantern</id>
    <content type="html">&lt;p&gt;最近“魏则西事件”整的风风火火，大家多多少少对百度都有不少意见吧。&lt;/p&gt;

&lt;p&gt;想用google吗？&lt;/p&gt;

&lt;p&gt;给大家推荐一个开源的翻墙工具，千万不要用来干坏事哦:P&lt;/p&gt;

&lt;p&gt;从同事那里发现的，简直牛逼。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/getlantern/lantern&quot;&gt;github&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;下载地址&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://raw.githubusercontent.com/getlantern/lantern-binaries/master/lantern-installer-beta.apk&quot;&gt;Android&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://raw.githubusercontent.com/getlantern/lantern-binaries/master/lantern-installer-beta.exe&quot;&gt;Windows XP SP 3 and above&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://raw.githubusercontent.com/getlantern/lantern-binaries/master/lantern-installer-beta.dmg&quot;&gt;OSX 10.8 and above&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;PS.最近区分免费版和专业版 :( 2016/8/3&lt;/p&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>docx4j使用小结</title>
    <link href="http://ouyanghan.com/docx4j"/>
    <updated>2016-03-31T00:00:00+08:00</updated>
    <id>http://ouyanghan.com/docx4j</id>
    <content type="html">&lt;p&gt;又忙活了一段时间，新项目还在搭，趁着有空总结一下前段时间用过的docx4j。&lt;/p&gt;

&lt;p&gt;当时的需求是这样的，客户提供了word的报表模板，我们需要根据查出的数据导出为pdf。&lt;/p&gt;

&lt;p&gt;面临的问题是：word模板比较复杂，不是单纯的填空，要根据数据的情况分多行展现。&lt;/p&gt;

&lt;p&gt;最后我选择了用docx4j来实现。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://baike.baidu.com/link?url=PAJ3dW50dwcJ71R02ZbTvhfeuglMJJ0EXulYjJzjF6W76n67fhoLJ4v5XKOep1wJB4bplI6xT69rPkRU9qBZ__&quot;&gt;百度百科&lt;/a&gt;：docx4j是一个Java类库用于创建和操作Microsoft Open XML(Word docx, Powerpoint pptx, 和 Excel xlsx)文件。&lt;/p&gt;

&lt;p&gt;需要注意的是，它操作的是.docx、.pptx和.xlsx文件，这些后缀的文件本质上与.doc、.ppt和.xls是不同的。&lt;/p&gt;

&lt;p&gt;可以这样理解：docx是基于xml文件来实现的，当你用压缩工作打开一个.docx文档，你就能看到里面的xml了。&lt;/p&gt;

&lt;p&gt;这就是为什么docx4j严重依赖JAXB了，因为它要操作的其实是xml文件。&lt;/p&gt;

&lt;p&gt;来看一下&lt;a href=&quot;https://github.com/plutext/docx4j/tree/master/src/samples/docx4j/org/docx4j/samples&quot;&gt;官方github的demo&lt;/a&gt;:&lt;/p&gt;

&lt;h2 id=&quot;docxcreatewordprocessingmldocumentjava&quot;&gt;新建一个.docx文件，CreateWordprocessingMLDocument.java&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public static void main(String[] args) throws Exception {
	WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.createPackage();
	MainDocumentPart mdp = wordMLPackage.getMainDocumentPart();
	
	// Example 1: add text in Title style
	mdp.addStyledParagraphOfText(&quot;Title&quot;, &quot;Example 1&quot;);

	// Example 2: add normal paragraph (no explicit style)
	mdp.addParagraphOfText(&quot;Example 2&quot;);

	// Example 4: Here is an easier way:
	String str = &quot;&amp;lt;w:p xmlns:w=\&quot;http://schemas.openxmlformats.org/wordprocessingml/2006/main\&quot; &amp;gt;&amp;lt;w:r&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:b /&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;w:t&amp;gt;Example 4&amp;lt;/w:t&amp;gt;&amp;lt;/w:r&amp;gt;&amp;lt;/w:p&amp;gt;&quot;;
    
	mdp.addObject(org.docx4j.XmlUtils.unmarshalString(str));
    
	// Example 5: Let&#39;s add a table
	int writableWidthTwips = wordMLPackage.getDocumentModel().getSections().get(0).getPageDimensions().getWritableWidthTwips();
	int cols = 3;
	int cellWidthTwips = new Double(Math.floor((writableWidthTwips/cols))).intValue();
    
	Tbl tbl = TblFactory.createTable(3, 3, cellWidthTwips);
	mdp.addObject(tbl);
    
	// Pretty print the main document part
	System.out.println(XmlUtils.marshaltoString(mdp.getJaxbElement(), true, true) );
	
	// save it
	String filename = System.getProperty(&quot;user.dir&quot;) + &quot;/OUT_CreateWordprocessingMLDocument.docx&quot;;
	wordMLPackage.save(new java.io.File(filename) );
	System.out.println(&quot;Saved &quot; + filename);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;example 3 有点烦，就给去掉了。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	MainDocumentPart mdp = wordMLPackage.getMainDocumentPart();
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;这段代码mdp获取的到的，其实就是用压缩工具打开的.docx文档中的document.xml文件的内容，
而我们对mdp操作也就是直接操作document.xml，最后通过document.xml来生成.docx文档。&lt;/p&gt;

&lt;p&gt;上面的所有的例子也就是修改document.xml。&lt;/p&gt;

&lt;p&gt;大家看example 4 ，可以直接把xml的内容放进document.xml中。&lt;/p&gt;

&lt;p&gt;根据我的需求，既然word模板有了，我就解压出来找到document.xml，把里面的内容复制出来再清空。通过代码自己去新增，所以我需要修改复制出来的内容，在需要赋值的地方，把查出来的值放进去。虽然比较笨，但还是保持了word文档的一致性，简直一模一样。一些代码如下：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;for (RepairMaterialsPojo material : pojo.getMaterials()) {
    String tr = &quot;&amp;lt;w:tr&amp;gt;&amp;lt;w:tblPrEx&amp;gt;&amp;lt;w:tblBorders&amp;gt;&amp;lt;w:top w:color=\&quot;auto\&quot; w:space=\&quot;0\&quot; w:sz=\&quot;12\&quot; w:val=\&quot;single\&quot;/&amp;gt;&amp;lt;w:left w:color=\&quot;auto\&quot; w:space=\&quot;0\&quot; w:sz=\&quot;12\&quot; w:val=\&quot;single\&quot;/&amp;gt;&amp;lt;w:bottom w:color=\&quot;auto\&quot; w:space=\&quot;0\&quot; w:sz=\&quot;12\&quot; w:val=\&quot;single\&quot;/&amp;gt;&amp;lt;w:right w:color=\&quot;auto\&quot; w:space=\&quot;0\&quot; w:sz=\&quot;12\&quot; w:val=\&quot;single\&quot;/&amp;gt;&amp;lt;w:insideH w:color=\&quot;auto\&quot; w:space=\&quot;0\&quot; w:sz=\&quot;6\&quot; w:val=\&quot;single\&quot;/&amp;gt;&amp;lt;w:insideV w:color=\&quot;auto\&quot; w:space=\&quot;0\&quot; w:sz=\&quot;6\&quot; w:val=\&quot;single\&quot;/&amp;gt;&amp;lt;/w:tblBorders&amp;gt;&amp;lt;w:tblLayout w:type=\&quot;fixed\&quot;/&amp;gt;&amp;lt;w:tblCellMar&amp;gt;&amp;lt;w:top w:type=\&quot;dxa\&quot; w:w=\&quot;0\&quot;/&amp;gt;&amp;lt;w:left w:type=\&quot;dxa\&quot; w:w=\&quot;108\&quot;/&amp;gt;&amp;lt;w:bottom w:type=\&quot;dxa\&quot; w:w=\&quot;0\&quot;/&amp;gt;&amp;lt;w:right w:type=\&quot;dxa\&quot; w:w=\&quot;108\&quot;/&amp;gt;&amp;lt;/w:tblCellMar&amp;gt;&amp;lt;/w:tblPrEx&amp;gt;&amp;lt;w:trPr&amp;gt;&amp;lt;w:trHeight w:hRule=\&quot;atLeast\&quot; w:val=\&quot;302\&quot;/&amp;gt;&amp;lt;/w:trPr&amp;gt;&amp;lt;w:tc&amp;gt;&amp;lt;w:tcPr&amp;gt;&amp;lt;w:tcW w:type=\&quot;dxa\&quot; w:w=\&quot;719\&quot;/&amp;gt;&amp;lt;w:vAlign w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;/w:tcPr&amp;gt;&amp;lt;w:p&amp;gt;&amp;lt;w:pPr&amp;gt;&amp;lt;w:jc w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;/w:pPr&amp;gt;&amp;lt;w:r&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;w:t&amp;gt;&quot; + index + &quot;&amp;lt;/w:t&amp;gt;&amp;lt;/w:r&amp;gt;&amp;lt;/w:p&amp;gt;&amp;lt;/w:tc&amp;gt;&amp;lt;w:tc&amp;gt;&amp;lt;w:tcPr&amp;gt;&amp;lt;w:tcW w:type=\&quot;dxa\&quot; w:w=\&quot;2682\&quot;/&amp;gt;&amp;lt;w:vAlign w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;/w:tcPr&amp;gt;&amp;lt;w:p&amp;gt;&amp;lt;w:pPr&amp;gt;&amp;lt;w:jc w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;/w:pPr&amp;gt;&amp;lt;w:r&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;w:t&amp;gt;&quot; + material
        .getMaterialName() + &quot;&amp;lt;/w:t&amp;gt;&amp;lt;/w:r&amp;gt;&amp;lt;/w:p&amp;gt;&amp;lt;/w:tc&amp;gt;&amp;lt;w:tc&amp;gt;&amp;lt;w:tcPr&amp;gt;&amp;lt;w:tcW w:type=\&quot;dxa\&quot; w:w=\&quot;1433\&quot;/&amp;gt;&amp;lt;w:vAlign w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;/w:tcPr&amp;gt;&amp;lt;w:p&amp;gt;&amp;lt;w:pPr&amp;gt;&amp;lt;w:jc w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;/w:pPr&amp;gt;&amp;lt;w:r&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;w:t&amp;gt;&quot; + material
            .getMaterialModel() + &quot;&amp;lt;/w:t&amp;gt;&amp;lt;/w:r&amp;gt;&amp;lt;/w:p&amp;gt;&amp;lt;/w:tc&amp;gt;&amp;lt;w:tc&amp;gt;&amp;lt;w:tcPr&amp;gt;&amp;lt;w:tcW w:type=\&quot;dxa\&quot; w:w=\&quot;813\&quot;/&amp;gt;&amp;lt;w:vAlign w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;/w:tcPr&amp;gt;&amp;lt;w:p&amp;gt;&amp;lt;w:pPr&amp;gt;&amp;lt;w:jc w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;/w:pPr&amp;gt;&amp;lt;w:r&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;w:t&amp;gt;&quot; + material
                .getUnit() + &quot;&amp;lt;/w:t&amp;gt;&amp;lt;/w:r&amp;gt;&amp;lt;/w:p&amp;gt;&amp;lt;/w:tc&amp;gt;&amp;lt;w:tc&amp;gt;&amp;lt;w:tcPr&amp;gt;&amp;lt;w:tcW w:type=\&quot;dxa\&quot; w:w=\&quot;813\&quot;/&amp;gt;&amp;lt;w:vAlign w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;/w:tcPr&amp;gt;&amp;lt;w:p&amp;gt;&amp;lt;w:pPr&amp;gt;&amp;lt;w:jc w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;/w:pPr&amp;gt;&amp;lt;w:r&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;w:t&amp;gt;&quot; + material
                    .getQuantity() + &quot;&amp;lt;/w:t&amp;gt;&amp;lt;/w:r&amp;gt;&amp;lt;/w:p&amp;gt;&amp;lt;/w:tc&amp;gt;&amp;lt;w:tc&amp;gt;&amp;lt;w:tcPr&amp;gt;&amp;lt;w:tcW w:type=\&quot;dxa\&quot; w:w=\&quot;756\&quot;/&amp;gt;&amp;lt;w:vAlign w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;/w:tcPr&amp;gt;&amp;lt;w:p&amp;gt;&amp;lt;w:pPr&amp;gt;&amp;lt;w:jc w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;/w:pPr&amp;gt;&amp;lt;w:r&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;w:t&amp;gt;&quot; + material
                        .getUnitPrice() + &quot;&amp;lt;/w:t&amp;gt;&amp;lt;/w:r&amp;gt;&amp;lt;/w:p&amp;gt;&amp;lt;/w:tc&amp;gt;&amp;lt;w:tc&amp;gt;&amp;lt;w:tcPr&amp;gt;&amp;lt;w:tcW w:type=\&quot;dxa\&quot; w:w=\&quot;816\&quot;/&amp;gt;&amp;lt;w:vAlign w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;/w:tcPr&amp;gt;&amp;lt;w:p&amp;gt;&amp;lt;w:pPr&amp;gt;&amp;lt;w:jc w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;/w:pPr&amp;gt;&amp;lt;w:r&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;w:t&amp;gt;&quot; + material
                            .getTotalCost() + &quot;&amp;lt;/w:t&amp;gt;&amp;lt;/w:r&amp;gt;&amp;lt;/w:p&amp;gt;&amp;lt;/w:tc&amp;gt;&amp;lt;w:tc&amp;gt;&amp;lt;w:tcPr&amp;gt;&amp;lt;w:tcW w:type=\&quot;dxa\&quot; w:w=\&quot;968\&quot;/&amp;gt;&amp;lt;w:vAlign w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;/w:tcPr&amp;gt;&amp;lt;w:p&amp;gt;&amp;lt;w:pPr&amp;gt;&amp;lt;w:jc w:val=\&quot;center\&quot;/&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;/w:pPr&amp;gt;&amp;lt;w:r&amp;gt;&amp;lt;w:rPr&amp;gt;&amp;lt;w:rFonts w:hint=\&quot;eastAsia\&quot;/&amp;gt;&amp;lt;/w:rPr&amp;gt;&amp;lt;w:t&amp;gt;&quot; + material
                                .getRemark() + &quot;&amp;lt;/w:t&amp;gt;&amp;lt;/w:r&amp;gt;&amp;lt;/w:p&amp;gt;&amp;lt;/w:tc&amp;gt;&amp;lt;/w:tr&amp;gt;&quot;;
    tbl_tr.append(tr);
    index++;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;最后生成pdf比较简单：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;OutputStream os = new FileOutputStream(destPath);
Docx4J.toPDF(wordMLPackage, os);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;遇到了一个坑，就是生成pdf有点慢，在本地调试接口的时候每次都是响应时间都过了还没好，但放到服务器上就没有问题了。&lt;/p&gt;
</content>
    <author>
      <name>ouyanghan</name>
      <uri>http://ouyanghan.com/about/</uri>
    </author>
  </entry>
  
</feed>